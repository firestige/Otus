# Logger configuration (log.LoggerConfig)
log:
  level: "info"
  pattern: "%time[%caller][%func][%goroutine][%level][%field] - %msg\n"
  time: "2006-01-02 15:04:05"
  appenders:
    # 控制台输出
    - type: "console"
      
    # # 文件输出
    # - type: "file" 
    #   level: "info"
    #   options:
    #     filename: "logs/otus.log"
    #     maxsize: 100        # MB
    #     maxage: 30          # 天
    #     maxbackups: 10      # 备份文件数
    #     compress: true      # 是否压缩
        
    # # Kafka输出 (待实现)
    # - type: "kafka"
    #   level: "warn"
    #   options:
    #     brokers: ["localhost:9092"]
    #     topic: "otus-logs"
    #     partition: 0
        
  # 格式化选项
  formatter:
    enable_colors: true
    full_timestamp: true
    disable_sorting: false
  buffer_size: 1024
  flush_interval: "5s"

# Sharable configuration (SharableConfig)  
sharable:
  clients:
    - plugin_name: "stub-client"
# Pipeline configurations (pipeline.Config array)
pipes:
  - common_config:
      pipe_name: "sip-capture"
      partition: 1
      fanout_id: 123
    capture:
      handle:
        network_interface: "eth0"
        snap_len: 65535
        buffer_size: 8388608
        timeout: 1000
        filter: "ip"
        fanout_id: 123
        capture_type: "afpacket"
      codec:
        max_age: 30
        max_fragments_num: 100
        max_ip_size: 1500
      parsers: 
        - plugin_name: "sip-parser"
          type: "sip"
      fanout_id: 123
    sender:
      reporters: 
      fallbacker:
        plugin_name: "none-fallbacker"
      client_name: ""
      max_buffer_size: 1024
      min_flush_events: 10
      flush_interval: 5
    buffer_size: 1024
    partitions: 1


# Metrics configuration (metrics.Config - empty struct)
metrics:

