# systemd-tmpfiles configuration for otus (ADR-031)
#
# D  – create dir & set ownership/permissions (remove & recreate on startup)
# d  – create dir if it doesn't exist (leave contents on startup)
# e  – clean files older than Age from an existing directory
#
# Install: cp configs/tmpfiles.d/otus.conf /etc/tmpfiles.d/otus.conf
# Apply:   systemd-tmpfiles --create /etc/tmpfiles.d/otus.conf

# Ensure top-level data directory exists
d /var/lib/otus       0750 root root -

# Ensure tasks sub-directory exists
d /var/lib/otus/tasks 0750 root root -

# Remove task record files older than 7 days (secondary GC layer).
# Primary GC is performed in-process via TaskManager.GCOldTasks().
e /var/lib/otus/tasks -    -    -    7d
